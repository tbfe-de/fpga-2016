<!DOCTYPE html>
<html>
  <head>
    <title>2016-07-13 09:45 - 10:30</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <!-- when changing the stylesheet file please see also remark below -->
    <link rel="stylesheet" type="text/css" href="styling.css" />
  </head>
  <body>
<!-- :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<!-- :::::::::: template pages come first ... skip to REALCONTENT ::::::::: -->
<!-- :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<textarea id="source">

layout: true
name: blank
styling: styling.css
styling-by: Martin Weitzel

<!--
  *****************************************************************************
  Template used for title page (only)
  *****************************************************************************
  Please change the 'styling-by:' attribute if you change the style-sheet.
-->

.stylehint[
Styled with [{{styling}}]({{styling}}) by {{styling-by}}
]

---
layout: true
name: plain
copyright: (CC) BY-SA
branding:  [Dipl.-Ing. Martin Weitzel](http://tbfe.de) &#8199 Tag 2 | Sprachen | 2016-07-13 | 09:45 … 10:30

<!--
  *****************************************************************************
  Template used for for pages NOT referring to any Info-Graphic
  *****************************************************************************
  The following attributes are mandatory FOR THE TEMPLATE PAGE and should
  simply be left empty if not meaningful.

  copyright: will be reproduced in each page footer first
  branding: will reproduced in each page footer next
  customer: will be reproduced in each page footer last

  As the above attributes are part of several page templates a global replace
  should be used for consistent changes.

  On pages USING THIS TEMPLATE the following attributes must be set:

  header: ## and header text (i.e. including the markdown formatting indicator)

-->

.pagefooter[
{{copyright}}: {{branding}} .fpga_2016-logo[]
]

---
layout: true
name: linkinfo
copyright: (CC) BY-SA
branding:  [Dipl.-Ing. Martin Weitzel](http://tbfe.de) &#8199 Tag 2 | Sprachen | 2016-07-13 | 09:45 … 10:30

<!--
  *****************************************************************************
  Template used for for pages INTRODUCING to a new Info-Graphic
  *****************************************************************************
  On this kind of pages a size-reduced version of the whole info graphic will
  be reproduced and occupies approximately 2/3 of the page width. So only add
  little information, preferably links to later pages dealing with single
  sections of the info graphic.

  On pages USING THIS TEMPLATE the following attributes must be set:

  graphic: file path to of the infographic EXCLUDING the suffix.
  header: ## and header text (i.e. including the markdown formatting indicator)

-->

.infographic[
[![Info-Grafik](InfoGraphics/{{graphic}}.png)](InfoGraphics/{{graphic}}.png
                "Click to open – add [CTRL+] SHIFT for new [tabbed] window")
]

.pagefooter[
{{copyright}}: {{branding}} .fpga_2016-logo[]
]

---
layout: false
template: blank
name: frontmatter

.title[
	C-Minus-Minus  
	Instead of C-Plus-Plus?
]
.subtitle[
	Efficient C++ for Embedded Programming means  
	– Know **WHAT** to use –  
	– Know what **NOT** to use –
	
	
]
.author.pull-left[
	Dipl.-Ing. Martin Weitzel  
	Technische Beratung für EDV  
	http://tbfe.de  

]
.client.pull-right[
	FPGA-Kongress 2016  
	Sprachen / Languages  
	2016-07-13 (09:45 … 10:30)
]

.F[:
You may download this presentation from the
[Author's Internet Site](http://tbfe.de/archive)
for any use in compliance with the
[Creative Commons BY-SA License](http://creativecommons.org/licenses/by-sa/2.0/).
As it has been created using the free HTML4-Tool [Remark](http://remarkjs.com),
its content is written using the
[Markdown-Syntax](http://daringfireball.net/projects/markdown/syntax),
so you may even enhance the purely electronic (non-printed) form with your own
annotations, only by means of any ordinary text editor. Just hit the P-key while
viewing this in an internet browser, and follow instructions.
]

???

(use +/- above to adjust the font size for convenient reading)

Remark allows to add presenter notes to each page. As that feature is **not**
used by the author of that presentation, it is available for private annotations
from [this page](#content) on.

Assuming you have downloaded and stored this presentation as HTML-file, proceed
as follows:

* Open the file in a text editor of your choice.

* Locate the page which you want to annotate.

  * You may do so by just scrolling down (but often it is easier to)
  * use the text search feature of your editor.

* Locate the separator to the next page (i.e. `---` in a line of its own).

* Before that add another line with three question marks (`???`) only.

Between these to separator lines you can put your annotations and view these
by using as you just view this page.

**Hint:**
Indent code examples with four spaces at the beginning of each line and they
will be displayed with their original line breaks. As an example, below the
page structure including annotations is shown:

    template: plain
    name: used_for_internal_links
    header: ## Shown at the Top of the Page

    Simply scroll down through this document loaded in an editor and you will
    probably catch the basics of Markdown-Syntax easily, e.g.  how to put in
    *slight* or **strong** emphasis or [add a link](http://tbfe.de/downloads).

    ???
    From here follow the [Presenter Notes], i.e. your private annotations
    ...
    ...

    [Presenter Notes]: adding-longer-links-that-keeps-text--uncluttered

    ...
    up to here.
    ---

To return to the normal view, now press the P-key once more.

<!--
If you want to put in meta-annotations, i.e. text that is not even shown
after pressing the P-key, simply use HTML comments, like it is done here.
-->

---
template: plain
class: agenda
name: content

## Agenda

------------------------------------------------------------------------------

1. [C++ as Superset of C		](#cplusplus_as_superset_of_c)

2. [What You May Use Blindly		](#what_you_may_use_blindly)

3. [What You Should Use Judiciously	](#what_you_should_use_judiciously)

4. [What You Might Want to Avoid	](#what_you_might_want_to_avoid)

------------------------------------------------------------------------------

You are welcome to interrupt the speaker with questions._[] and – especially
during the code-walk –– propose to try small changes.

.F[:
Your questions will be answered during the presentation to the best of the
speaker's abilities and maybe in private communication after the presentation.
]

---
template: plain
name: what_you_may_use_blindly

## C++ as Superset of C

This means:

* Everything that can be done in C …

* … can be done in C++ too._[]

* **AND MUCH MUCH MORE**

.N[
So the art of using C++ in Embedded Projects is to

* use only what is beneficial and

* leave out everything else.
]

.F[:
Well, not quite: some of the "bad parts" which are still in the C language have
been cut off in C++. Most of this is still present in C for historical reasons
and to keep the language backward compatible with a software base that still
makes use of these features. The pressure was not quite that strong in C++ so
the principle could be adopted: *As close to C as possible, but no closer.*
]

---
template: plain
name: what_you_may_use_blindly

## What You May Use Blindly

-------------------------------------------------------------------------------
* [Name Spaces				](#name_spaces)
* [Function Overloading			](#function_overloading)
* [C++-Style Casts			](cpp_new_casts)
* [Classic References			](#classic_references)
* [Access Protection for `struct`s	](#access_protection)
* [STL Algorithms (for Native Arrays)	](#stl_algorithms)
* C++11/14/1z …
  * [… `nullptr`			](#cpp11_nullptr)
  * [… `constexpr`			](#cpp11_nullptr)
  * [… Scoped `enum`s			](#cpp11_scoped_enums)
  * [… Type Aliases			](#cpp11_type_aliases)
  * [… `auto`-Variables			](#cpp11_auto_variables)
  * [… Uniform Initialisation		](#cpp11_uniform_initialisation)
(… and maybe even more …)
-------------------------------------------------------------------------------

---
template: plain
name: name_spaces

### Name Spaces

To organize code via the C++ `namespace`-s is

* a pure compile-time feature

* an improvement over lexically qualified names

.I[
See also:
http://en.cppreference.com/w/cpp/language/namespace
]

---
template: plain
name: function_overloading

### Function Overloading			

Overloading is

* a pure compile-time feature

* an improvement over having to **use and remember*

  * different function names for

  * semantically equivalent operations

.I[
See also:
http://en.cppreference.com/w/cpp/language/overload_resolution
]

---
template: plain
name: cpp_new_casts

### C++-Style Casts			

The new cast syntax introduced with C++98

* better expresses the purpose of a type conversion

* avoids spurious errors on the developer's side

.I[
See also:
http://en.cppreference.com/w/cpp/language/static_cast
http://en.cppreference.com/w/cpp/language/dynamic_cast
http://en.cppreference.com/w/cpp/language/const_cast
http://en.cppreference.com/w/cpp/language/reinterpret_cast
]

---
template: plain
name: classic_references

### Classic References			

Classic references are

* at the **low-level view** a different syntax for pointers

* at the **high-level view** aliases names for memory locations


.I[
See also:
http://en.cppreference.com/w/cpp/language/reference
]

---
template: plain
name: access_protection

### Access Protection for `struct`s

Compared to "opaque types" implemented via C-`struct`s

* C++ classes provide better access protection

* with **no overhead at run-time** introduced at run-time

-------------------------------------------------------------------------------

Designing opaque types **does not mean to**

* to simply make all data members `private` and

* provide `public` *accessors* and *modifiers* at a "1:1" base

-------------------------------------------------------------------------------

Instead **which operations to provide** should

* consider the typical client's use and

* especially strive to protect invariants


---
template: plain
name: stl_algorithms

### STL Algorithms (for Native Arrays)

All the algorithms provide by the STL

* can be applied to native array

* by using native pointers as iterators

.I[
See also:
http://en.cppreference.com/w/cpp/algorithm
http://en.cppreference.com/w/cpp/numeric
]

---
template: plain
name: cpp11_nullptr

### C++11 `nullptr`			

Via the keyword `nullptr`

* C++11 provides a unique value of type `std::nullptr_t`

* **convertible to any pointer type**

* **not comparing equal** to any valid memory address

.I[
See also:
http://en.cppreference.com/w/cpp/language/nullptr
]

---
template: plain
name: cpp11_nullptr

### C++11 `constexpr`

The `constexpr` qualifier applied to

* variables guarantees compile-time initialisation

* functions allows their call in compile-time initialisation of variables

.I[
See also:
http://en.cppreference.com/w/cpp/language/constexpr
]

---
template: plain
name: cpp11_scoped_enums

### C++11 Scoped `enum`s			

Scoped `enum`s

* cause no pollution of their surrounding name space

* without the requirement for lexical qualification

.I[
See also:
http://en.cppreference.com/w/cpp/language/scoped_enum
]

---
template: plain
name: cpp11_type_aliases

### C++11 Type Aliases			

Type aliases provide a "left-to-right" style writing type definitions:

.pull-left[
Classic type definitions:
```
typedef unsigned long long ULL;
```
]

.pull-right[
C++11 type aliases:
```
using ULL = unsigned long long;
```
]

<!-- -->

.I[
See also:
http://en.cppreference.com/w/cpp/language/type_alias
]

---
template: plain
name: cpp11_auto_variables

### C++11 `auto`-Variables			

By using `auto` for the type of a variable the actual type

* is **statically** deduced from the initialisation expression

* (in a way that most often._[] meets the expectations of the user)

.I[
See also:
http://en.cppreference.com/w/cpp/language/auto
]

.F[:
But not always … there are some border cases with respect to initializer lists
which may cause surprise.
]

---
template: plain
name: cpp11_uniform_initialisation

### C++11 Uniform Initialisation		

.I[
See also:
http://en.cppreference.com/w/cpp/language/value_initialization
http://en.cppreference.com/w/cpp/language/direct_initialization
http://en.cppreference.com/w/cpp/language/copy_initialization
http://en.cppreference.com/w/cpp/language/list_initialization
http://en.cppreference.com/w/cpp/language/aggregate_initialization
http://en.cppreference.com/w/cpp/language/reference_initialization
]

---
template: plain
name: what_you_should_use_judiciously

## What You Should Use Judiciously

-------------------------------------------------------------------------------
* [Inline Functions			](#inline_functions)
* [Operator Overloading			](#operator_overloading)
* [Class Specific Type Conversions	](#class_specific_type_conversions)
* [Composition and Inheritance		](#composition_and_inheritance)
* [Runtime Polymorphism			](#runtime_polymorphism)
* [General Runtime Type-Identification	](#general_rtti)
* ["GoF-Style" Design Patterns 		](#gof_style_design_patterns)
* Templates for …
  * [… Type Generic Classes		](#type_generic_classes)
  * [… Type Generic Algorithms		](#type_generic_algorithms)
  * [… Configurable Policies		](#template_based_policies)
  * [… Meta-Programming			](#template_meta_programming)
* C++11 …
  * [… Rvalue References		](#cpp11_rvalue_references)
  * [… Literal Suffixes 		](#cpp11_literal_suffixes)
  * [… Lambdas 				](#cpp11_lambdas)
  * [… `std::function` and `std::bind`	](#cpp11_functional)
  * [… Smart Pointers			](#cpp11_smart_pointers)
* [Extensions from the Boost Platform	](#boost_extensions)
-------------------------------------------------------------------------------

---
template: plain
name: inline_functions

### Inline Functions

Using the `inline` qualifier on a function

* will trade

  * the memory foot-print (with respect to code space)

  * for run-time performance (and better code linearity)

* **may be a "win-win" situation in case or very small functions**

.I[
See also:
http://en.cppreference.com/w/cpp/language/inline
]

---
template: plain
name: operator_overloading

### Operator Overloading

Overloading **may** improve readability of some source code

* **if** it follows the traditional meaning of the operator symbol

* **may** invoke expectations on the client's side that cause a lot of work.

.I[
See also:
http://en.cppreference.com/w/cpp/language/operators
http://www.boost.org/doc/libs/release/libs/utility/operators.htm
]

---
template: plain
name: class_specific_type_conversions

### Class Specific Type Conversions

Automatic conversions may be defined by

* a constructor describing

  * how a different type is

  * converted into an object of its class

* a type-case operation describing

  * how an object of its class is

  * converted into a different type

.I[
See also:
http://en.cppreference.com/w/cpp/language/copy_initialization
http://en.cppreference.com/w/cpp/language/cast_operator
http://en.cppreference.com/w/cpp/language/explicit
]

---
template: linkinfo
graphic: ClassToMemoryMapping
name: composition_and_inheritance

### Composition and Inheritance

---
template: linkinfo
graphic: RuntimeTypeIdentification
name: runtime_polymorphism

### Runtime Polymorphism

(see left part of graphic)

---
template: linkinfo
graphic: RuntimeTypeIdentification
name: general_rtti

### General Runtime Type-Identification	

(see right part of graphic)

---
template: linkinfo
graphic: Example-OpenClosePrinciple
name: gof_style_design_patterns

### "GoF-Style" Design Patterns 		

(see left part of graphic)

---
template: linkinfo
graphic: TemplateBasics
name: type_generic_classes

### Type Generic Classes		

(see left part of graphic)

---
template: linkinfo
graphic: TemplateBasics
name: type_generic_algorithms

### Type Generic Algorithms		

(see right part of graphic)

---
template: linkinfo
graphic: Example-OpenClosePrinciple
name: template_based_policies

### Template Based Policies		

(see right part of graphic)

---
template: plain
name: template_meta_programming

### Template Meta-Programming

Meta programming means to use templates as compile-time functions to

* transforming some "input"

  * consisting of (concrete) types or

  * values that can be calculated at compile-time

* into some "output"

  * consisting of a (concrete) type or

  * values that is determined compile-time

.N.center[
Meta programming applies in a lot of areas  
which may not seem obvious at a cursory look …._[]
]

.F[:
Otherwise, sorry that barrel is too large to be opened here quickly …
]

---
template: plain
name: cpp11_rvalue_references

### C++11 Rvalue References		

Rvalues are values

* which have some storage

* but (very) limited life-time

.I[
http://en.cppreference.com/w/cpp/language/reference
]

---
template: plain
name: cpp11_literal_suffixes

### C++11 Literal Suffixes

User defined literal suffixes provide a similar notation as used to denote
physical units.

.I[
See also:
http://en.cppreference.com/w/cpp/language/user_literal
]

---
template: plain
name: cpp11_lambdas

### C++11 Lambdas

Lambdas – also known as function literals – are

* especially useful to control some aspect of an STL algorithms 

* compete with the use of *Functors* and *Function Pointers*

.I[
See also:
http://en.cppreference.com/w/cpp/language/lambda
]

---
template: plain
name: cpp11_functional

### C++11 `std::function` and `std::bind`

.I[
See also:
http://en.cppreference.com/w/cpp/utility/functional/function
http://en.cppreference.com/w/cpp/utility/functional/bind
]

---
template: linkinfo
graphic: SmartPointers
name: cpp11_smart_pointers

### C++11 Smart Pointers

---
template: plain

### C++11 Smart Pointers (2)

.I[
See also:
http://en.cppreference.com/w/cpp/memory/unique_ptr
http://en.cppreference.com/w/cpp/memory/shared_ptr
http://en.cppreference.com/w/cpp/memory/weak_ptr
]

---
template: plain
name: boost_extensions

### Extensions from the Boost Platform	

.I[
See also:
http://www.boost.org
]

---
template: plain
name: what_you_might_want_to_avoid

## What You Might Want to Avoid

.pull-left[
-------------------------------------------------------------------------------
GENERALLY:

* [Everything not Properly Understood	](#avoid_not_properly_understood)
* [Badly Structured Libraries		](#avoid_badly_structured_libs)

-------------------------------------------------------------------------------
]

.pull-right[
-------------------------------------------------------------------------------
SPECIFICALLY:

* [`virtual` Destructors		](#virtual_destructors)
* [Diamond-Shaped Inheritance		](#diamond_shaped_inheritance)
* [Compiling with Exceptions Enabled	](#disable_exceptions)

-------------------------------------------------------------------------------
]

<!-- -->


---
template: plain
name: avoid_not_properly_understood

### Everything not Properly Understood	

.N.center[
Don't play with a scalpel knife  
until you have a good understanding  
how easy and deep it cuts.
]

---
template: plain
name: avoid_badly_structured_libs

### Badly Structured Libraries		

Many Libraries have been designed with a "workstation/server"-type
hardware in mind

* where memory comes at (seemingly) "no cost" and

* everything is loaded as shared object / DLL anyway

.N[
Such libraries often require a **major restructuring** to make them usable
for static linking at a "fine grained" resolution.
]

---
template: plain
name: virtual_destructors

### `virtual` Destructors

Be sure to understand that the "requirement" to use `virtual` destructors
**always** if a class is a base class from which other classes are derived

* **may** have a substantial negative impact on run-time performance

* may add some a good degree of robustness to the code base

* **but is really necessary only** if derived classes are

  * allocated on the heap and later

  * destroyed via base-class pointers

---
template: linkinfo
graphic: DiamondShapedInheritance
name: diamond_shaped_inheritance

### Diamond-Shaped Inheritance		

---
template: linkinfo
graphic: ExceptionBasics
name: disable_exceptions

### Compiling with Exceptions Enabled	

---
template: plain
name: you_name_it

## And More – If Time Allows

So you name it …

.center[

… otherwise:

.N[

**
*Thanks for Listening!*
**

]
]

</textarea>
<!-- :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<!-- ::::::::::::::::::::: )-: ereh TNETNOCLAER fo dne :::::::::::::::::::: -->
<!-- :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
    <script src="remark.min.js" type="text/javascript">
    </script>
    <script type="text/javascript">
      var slideshow = remark.create({ highlightLanguage: 'tcl', highlightStyle: 'docco' });
    </script>
  </body>
</html>
